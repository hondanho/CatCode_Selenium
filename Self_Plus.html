<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" async="" src="./2 - Bát Tự - Self Plus_files/analytics.js.download"></script>
    <script type="text/javascript" async="" src="./2 - Bát Tự - Self Plus_files/js"></script>
    <script src="./2 - Bát Tự - Self Plus_files/2974783736181458" async=""></script>
    <script async="" src="./2 - Bát Tự - Self Plus_files/fbevents.js.download"></script>
    <script>
        var SELFPLUS_SERVER = "https://api.selfplus.vn";
        var SELFPLUS_DOMAIN_LOGIN = "https://accounts.selfplus.vn";
        var SELFPLUS_BRANDINFO = "%7B%22battu.bandobackhome.com%22%3A%7B%22id%22%3A%22backhome%22%2C%22name%22%3A%22Back%20Home%20Group%22%2C%22brandCode%22%3A%22BACKHOME%22%2C%22paymentCode%22%3A%22BAZI%22%2C%22logo%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22logoSquare%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22copyright%22%3A%22Ph%C3%A1t%20tri%E1%BB%83n%20b%E1%BB%9Fi%20%3Ca%20href%3D%5C%22https%3A%2F%2Fselfplus.vn%5C%22%3ESelf%20Plus%3C%2Fa%3E.%22%2C%22homePage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22contactPage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22code%22%3A%22BACKHOMECOMBAZI%22%7D%2C%22battu.bandobackhome.vn%22%3A%7B%22id%22%3A%22backhome%22%2C%22name%22%3A%22Back%20Home%20Group%22%2C%22brandCode%22%3A%22BACKHOME%22%2C%22paymentCode%22%3A%22BAZI%22%2C%22logo%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22logoSquare%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22copyright%22%3A%22Ph%C3%A1t%20tri%E1%BB%83n%20b%E1%BB%9Fi%20%3Ca%20href%3D%5C%22https%3A%2F%2Fselfplus.vn%5C%22%3ESelf%20Plus%3C%2Fa%3E.%22%2C%22homePage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22contactPage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22code%22%3A%22BACKHOMEVNBAZI%22%7D%2C%22battu.bandobackhome.net%22%3A%7B%22id%22%3A%22backhome%22%2C%22name%22%3A%22Back%20Home%20Group%22%2C%22brandCode%22%3A%22BACKHOME%22%2C%22paymentCode%22%3A%22BAZI%22%2C%22logo%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22logoSquare%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22copyright%22%3A%22Ph%C3%A1t%20tri%E1%BB%83n%20b%E1%BB%9Fi%20%3Ca%20href%3D%5C%22https%3A%2F%2Fselfplus.vn%5C%22%3ESelf%20Plus%3C%2Fa%3E.%22%2C%22homePage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22contactPage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22code%22%3A%22BACKHOMENETBAZI%22%7D%2C%22battu.bandobackhome.site%22%3A%7B%22id%22%3A%22backhome%22%2C%22name%22%3A%22Back%20Home%20Group%22%2C%22brandCode%22%3A%22BACKHOME%22%2C%22paymentCode%22%3A%22BAZI%22%2C%22logo%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22logoSquare%22%3A%22%2FContent%2Flogo-backhomegroup.png%22%2C%22copyright%22%3A%22Ph%C3%A1t%20tri%E1%BB%83n%20b%E1%BB%9Fi%20%3Ca%20href%3D%5C%22https%3A%2F%2Fselfplus.vn%5C%22%3ESelf%20Plus%3C%2Fa%3E.%22%2C%22homePage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22contactPage%22%3A%22https%3A%2F%2Fbackhomegroup.net%22%2C%22code%22%3A%22BACKHOMESITEBAZI%22%7D%2C%22default%22%3A%7B%22id%22%3A%22bazi%22%2C%22name%22%3A%22Self%20Plus%22%2C%22code%22%3A%22BAZI%22%2C%22logo%22%3A%22%2FContent%2Flogo-transparent.png%22%2C%22logoSquare%22%3A%22%2FContent%2Fselfplus-footer.png%22%2C%22copyright%22%3A%22B%E1%BA%A3n%20Quy%E1%BB%81n%20thu%E1%BB%99c%20%3Ca%20href%3D%5C%22https%3A%2F%2Fselfplus.vn%5C%22%3ESelf%20Plus%3C%2Fa%3E.%22%2C%22homePage%22%3A%22https%3A%2F%2Fselfplus.vn%22%2C%22contactPage%22%3A%22https%3A%2F%2Fselfplus.vn%2Flien-he-chung-toi%22%7D%7D";
        var ACCESS_TOKEN = "";
        const MEMBERSHIP_TRIAL = 0;
        const MEMBERSHIP_BASIC = 1;
        const MEMBERSHIP_PRO = 2;
        const MEMBERSHIP_ULTIMATE = 3;
    </script>

    <script src="./2 - Bát Tự - Self Plus_files/jquery-2.2.4.min.js.download"></script>
    <script src="./2 - Bát Tự - Self Plus_files/selfplus-common.js"></script>
    <script src="./2 - Bát Tự - Self Plus_files/selfplus-bazi.js"></script>
</head>
<body>

    <textarea id="jsonBatTu" style="height: 200px; width: 200px;"></textarea>

    <script src="./2 - Bát Tự - Self Plus_files/jquery.blockUI.js(1).download"></script>
    <script src="./2 - Bát Tự - Self Plus_files/moment.js.download"></script>
    <script src="./2 - Bát Tự - Self Plus_files/common.js"></script>
    <script>

        function deleteChart(ACCESS_TOKEN, chartId) {
            $.ajax({
                crossDomain: true,
                type: "POST",
                url: "https://api.selfplus.vn/api/selfplus/DeleteChart",
                data: {
                    ChartId: chartId,
                    Token: ACCESS_TOKEN
                },
                success: function (data) {

                },
                error: function (data) {
                    $('#jsonBatTu').text('123');
                }
            });
        };

        function editBaziChart(ACCESS_TOKEN, chartId, idGioiTinh, year, month, day) {
            const data = {
                Id: chartId,
                Name: 'Name ' + chartId,
                Gender: idGioiTinh,
                Year: year,
                Month: month,
                Day: day,
                Hour: 0,
                Minute: 0,
                UnknownHour: 1,
                Token: ACCESS_TOKEN
            }
            debugger;
            $.ajax({
                crossDomain: true,
                type: "POST",
                url: 'https://api.selfplus.vn/api/Bazi/EditBaziChart',
                data,
                success: function (data) {
                    debugger;
                    getDataBatTu(chartId, ACCESS_TOKEN);
                },
                error: function (data) {
                    $('#jsonBatTu').text('123');
                }
            });
        }

        function getDataBatTu(chartId, ACCESS_TOKEN) {
            $.ajax({
                crossDomain: true,
                type: "POST",
                url: 'https://api.selfplus.vn/api/selfplus/LoadSingleChart',
                data: {
                    Token: ACCESS_TOKEN,
                    ChartId: chartId,
                    ShiftingStar: undefined,
                    ShiftingStem: undefined
                },
                success: function (data) {
                    $('#jsonBatTu').text(data);
                },
                error: function (data) {
                    $('#jsonBatTu').text('123');
                }
            });

        }

        $(document).ready(function () {
            
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const ACCESS_TOKEN = urlParams.get('token')
            const chartId = urlParams.get('chartId')
            const idGioiTinh = urlParams.get('idGioiTinh')
            const year = urlParams.get('year')
            const month = urlParams.get('month')
            const day = urlParams.get('day')

            editBaziChart(ACCESS_TOKEN, chartId, idGioiTinh, year, month, day);

        });
    </script>
</body>
</html>